<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon"
        href="https://cdn.prod.website-files.com/631c05c192aded085d20e9e8/64df0b963d7b944c8a3d49d2_yellow.png">
    <link rel="stylesheet" href="cardjitsu-teste1.css">
    <title>Card Jitsu - 1</title>
</head>

<body>
    <h2>Card Jitsu</h2>

    <button class="fire" id="carta1" onclick="lancar1()" </button>
        <button class="ice" id="carta2" onclick="lancar2()"></button>
        <button class="water" id="carta3" onclick="lancar3()"></button>
        <button class="water" id="carta4" onclick="lancar4()"></button>
        <button class="ice" id="carta5" onclick="lancar5()"></button>
        <div id="div_club"></div>
        <div id="div_vitoria"></div>
</body>

</html>
<script>
    // Definindo os valores das cartas do player
    var valor_carta1 = 0
    var valor_carta2 = 0
    var valor_carta3 = 0
    var valor_carta4 = 0
    var valor_carta5 = 0

    // cartas da máquina
    var valor_machine1 = 0
    var valor_machine2 = 0
    var valor_machine3 = 0
    var valor_machine4 = 0
    var valor_machine5 = 0
    var tipo_machine = 0

    // Definindo o tipo da carta (Fogo, água ou gelo)
    var tipo_player = 0

    // Definindo as rodadas específicas
    var rodada = 0
    var rodada_1 = 0
    var rodada_2 = 0
    var rodada_3 = 0
    var rodada_4 = 0
    var rodada_5 = 0

    // Atribuindo valores aos tipos de cartas
    var fogo = 3;
    var gelo = 2;
    var agua = 1;

    // Variável para exibição dos resultados
    var tipo_string_machine = 0
    var string_rodada = 0

    // Definindo os resultados das rodadas
    var resultado_rodada = 0
    var empate = 4
    var jogador_win = 5
    var jogador_perdeu = 6

    // Definindo o vencedor de todas as rodadas
    var won_rounds = 0
    var lost_rounds = 0
    var tied_rounds = 0

    // Função que aleatoriza e define os valores das cartas
    var index = 1
    function inicial() {

        while (index <= 5) {
            btn_carta = document.getElementById(`carta${index}`)

            var valor = Math.floor(Math.random() * 11) + 2
            var valor_machine = Math.floor(Math.random() * 11) + 2

            btn_carta.innerHTML = `<div style="background-color: bisque;
             width: 50px; display: flex; justify-content: center;">${valor}</div>`

            if (index == 1) {
                valor_carta1 = valor
            } else if (index == 2) {
                valor_carta2 = valor
            } else if (index == 3) {
                valor_carta3 = valor
            } else if (index == 4) {
                valor_carta4 = valor
            } else {
                valor_carta5 = valor
            }

            if (index == 1) {
                valor_machine1 = valor_machine
            } else if (index == 2) {
                valor_machine2 = valor_machine
            } else if (index == 3) {
                valor_machine3 = valor_machine
            } else if (index == 4) {
                valor_machine4 = valor_machine
            } else {
                valor_machine5 = valor_machine
            }

            index++
        }
    }

    // Função que compara os valores e tipos das cartas
    function comparar() {
        resultado_rodada = 0

        // Comparando os Tipos
        if (tipo_player == fogo) {
            if (tipo_machine == 3) {
                resultado_rodada = empate
            } else if (tipo_machine == 2) {
                resultado_rodada = jogador_win
            } else {
                resultado_rodada = jogador_perdeu
            }
        }
        if (tipo_player == gelo) {
            if (tipo_machine == 2) {
                resultado_rodada = empate
            } else if (tipo_machine == 1) {
                resultado_rodada = jogador_win
            } else {
                resultado_rodada = jogador_perdeu
            }
        }
        if (tipo_player == agua) {
            if (tipo_machine == 1) {
                resultado_rodada = empate
            } else if (tipo_machine == 3) {
                resultado_rodada = jogador_win
            } else {
                resultado_rodada = jogador_perdeu
            }
        }

        // Definindo os valores das rodadas
        if (rodada == 1) {
            rodada_1 = tipo_player
        } else if (rodada == 2) {
            rodada_2 = tipo_player
        } else if (rodada == 3) {
            rodada_3 = tipo_player
        } else if (rodada == 4) {
            rodada_4 = tipo_player
        } else if (rodada == 5) {
            rodada_5 = tipo_player
        }
    }

    // Função que determina o padrão de jogadas da máquina
    function jogada_maquina() {
        if (rodada == 1) {
            tipo_machine = Math.floor(Math.random() * 3) + 1
        }
        if (rodada == 2) {
            if (rodada_1 == fogo) {
                tipo_machine = gelo
            } else if (rodada_1 == gelo) {
                tipo_machine = agua
            } else {
                tipo_machine = fogo
            }
        }
        if (rodada == 3) {
            if (rodada_2 == fogo) {
                tipo_machine = gelo
            } else if (rodada_2 == gelo) {
                tipo_machine = agua
            } else {
                tipo_machine = fogo
            }
        }
        if (rodada == 4) {
            if (rodada_3 == fogo) {
                tipo_machine = gelo
            } else if (rodada_3 == gelo) {
                tipo_machine = agua
            } else {
                tipo_machine = fogo
            }
        }
        if (rodada == 5) {
            if (rodada_4 == fogo) {
                tipo_machine = gelo
            } else if (rodada_4 == gelo) {
                tipo_machine = agua
            } else {
                tipo_machine = fogo
            }
        }
    }

    // Função que determina o vencedor do game
    function vencer() {
        if (rodada == 5) {
            if (won_rounds > lost_rounds) {
                div_vitoria.innerHTML += `<b> Player venceu!!! </b>`
            }
            if (lost_rounds > won_rounds) {
                div_vitoria.innerHTML += `<b> Player perdeu :(, vitória da Máquina </b>`
            }
            if (lost_rounds == won_rounds) {
                div_vitoria.innerHTML += `<b> O jogo deu empate! Tente mais uma vez, a segunda tentativa
                sempre dá sorte </b>`
            }
        }

        // Transformando os tipos das cartas (3, 2, 1) em strings (Fogo, água e gelo)
        if (tipo_machine == fogo) {
            tipo_string_machine = "fogo"
        }
        if (tipo_machine == gelo) {
            tipo_string_machine = "gelo"
        }
        if (tipo_machine == agua) {
            tipo_string_machine = "água"
        }

        // Transformando os resultados em strings
        if (resultado_rodada == jogador_win) {
            string_rodada = "ganhou"
        }
        if (resultado_rodada == jogador_perdeu) {
            string_rodada = "perdeu"
        }
        if (resultado_rodada == empate) {
            string_rodada = "empatou"
        }
    }

    // Funções específicas para cada carta
    function lancar1() {
        rodada++
        tipo_player = fogo
        jogada_maquina()
        comparar()

        if (resultado_rodada == empate) {

            if (valor_carta1 > valor_machine1) {
                resultado_rodada = jogador_win
            } else if (valor_carta1 < valor_machine1) {
                resultado_rodada = jogador_perdeu
            } else if (valor_carta1 == valor_machine1) {
                resultado_rodada = empate
            }
        }

        // Definindo vencedores
        if (resultado_rodada == jogador_win) {
            won_rounds ++
        } else if (resultado_rodada == jogador_perdeu) {
            lost_rounds ++
        } else if (resultado_rodada == empate) {
            tied_rounds ++
        }

        vencer()

        div_club.innerHTML = `Rodada ${rodada}- Você lançou uma carta tipo fogo, de valor ${valor_carta1}, <br>
        seu oponente lançou uma carta tipo ${tipo_string_machine}, de valor ${valor_machine1}, <br>
        <b> você ${string_rodada}! </b>`

        document.getElementById("carta1").outerHTML = ""

        console.log('vitória:' + won_rounds)
        console.log('derrota:' + lost_rounds)
        console.log('empate:' + tied_rounds)
        console.log(resultado_rodada == jogador_win)
    }

    function lancar2() {
        rodada++
        tipo_player = gelo
        jogada_maquina()
        comparar()

        if (resultado_rodada == empate) {

            if (valor_carta2 > valor_machine2) {
                resultado_rodada = jogador_win
            } else if (valor_carta2 < valor_machine2) {
                resultado_rodada = jogador_perdeu
            } else if (valor_carta2 == valor_machine2) {
                resultado_rodada = empate
            }
        }

        if (resultado_rodada == jogador_win) {
            won_rounds ++
        } else if (resultado_rodada == jogador_perdeu) {
            lost_rounds ++
        } else if (resultado_rodada == empate) {
            tied_rounds ++
        }

        vencer()

        div_club.innerHTML = `Rodada ${rodada}- Você lançou uma carta tipo gelo, de valor ${valor_carta2}, <br>
        seu oponente lançou uma carta tipo ${tipo_string_machine}, de valor ${valor_machine2}, <br>
        <b> você ${string_rodada}! </b>`

        document.getElementById("carta2").outerHTML = ""

        console.log('vitória:' + won_rounds)
        console.log('derrota:' + lost_rounds)
        console.log('empate:' + tied_rounds)
        console.log(resultado_rodada == jogador_win)
    }

    function lancar3() {
        rodada++
        tipo_player = agua
        jogada_maquina()
        comparar()

        if (resultado_rodada == empate) {

            if (valor_carta3 > valor_machine3) {
                resultado_rodada = jogador_win
            } else if (valor_carta3 < valor_machine3) {
                resultado_rodada = jogador_perdeu
            } else if (valor_carta3 == valor_machine3) {
                resultado_rodada = empate
            }
        }

        if (resultado_rodada == jogador_win) {
            won_rounds ++
        } else if (resultado_rodada == jogador_perdeu) {
            lost_rounds ++
        } else if (resultado_rodada == empate) {
            tied_rounds ++
        }

        vencer()

        div_club.innerHTML = `Rodada ${rodada}- Você lançou uma carta tipo água, de valor ${valor_carta3}, <br>
        seu oponente lançou uma carta tipo ${tipo_string_machine}, de valor ${valor_machine3}, <br>
        <b> você ${string_rodada}! </b>`

        document.getElementById("carta3").outerHTML = ""

        console.log('vitória:' + won_rounds)
        console.log('derrota:' + lost_rounds)
        console.log('empate:' + tied_rounds)
        console.log(resultado_rodada == jogador_win)
    }

    function lancar4() {
        rodada++
        tipo_player = agua
        jogada_maquina()
        comparar()

        if (resultado_rodada == empate) {

            if (valor_carta4 > valor_machine4) {
                resultado_rodada = jogador_win
            } else if (valor_carta4 < valor_machine4) {
                resultado_rodada = jogador_perdeu
            } else if (valor_carta4 == valor_machine4) {
                resultado_rodada = empate
            }
        }

        if (resultado_rodada == jogador_win) {
            won_rounds ++
        } else if (resultado_rodada == jogador_perdeu) {
            lost_rounds ++
        } else if (resultado_rodada == empate) {
            tied_rounds ++
        }

        vencer()

        div_club.innerHTML = `Rodada ${rodada}- Você lançou uma carta tipo água, de valor ${valor_carta4}, <br>
        seu oponente lançou uma carta tipo ${tipo_string_machine}, de valor ${valor_machine4}, <br>
        <b> você ${string_rodada}! </b>`

        document.getElementById("carta4").outerHTML = ""

        console.log('vitória:' + won_rounds)
        console.log('derrota:' + lost_rounds)
        console.log('empate:' + tied_rounds)
        console.log(resultado_rodada == jogador_win)
    }

    function lancar5() {
        rodada++
        tipo_player = gelo
        jogada_maquina()
        comparar()

        if (resultado_rodada == empate) {

            if (valor_carta5 > valor_machine5) {
                resultado_rodada = jogador_win
            } else if (valor_carta5 < valor_machine5) {
                resultado_rodada = jogador_perdeu
            } else if (valor_carta5 == valor_machine5) {
                resultado_rodada = empate
            }
        }

        if (resultado_rodada == jogador_win) {
            won_rounds ++
        } else if (resultado_rodada == jogador_perdeu) {
            lost_rounds ++
        } else if (resultado_rodada == empate) {
            tied_rounds ++
        }

        vencer()

        div_club.innerHTML = `Rodada ${rodada}- Você lançou uma carta tipo gelo, de valor ${valor_carta5}, <br>
        seu oponente lançou uma carta tipo ${tipo_string_machine}, de valor ${valor_machine5}, <br>
        <b> você ${string_rodada}! </b>`

        document.getElementById("carta5").outerHTML = ""

        console.log('vitória:' + won_rounds)
        console.log('derrota:' + lost_rounds)
        console.log('empate:' + tied_rounds)
        console.log(resultado_rodada == jogador_win)
    }

    inicial()

</script>